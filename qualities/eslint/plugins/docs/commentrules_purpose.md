# コメントルールの目的とロケール言語ポリシー

## このドキュメントの位置づけ

このファイルは、`qualities/eslint/03-documentation/docs/config.mjs` と
`qualities/policy/comment_locale/docs/run.mjs` で定義されている
**コメント／JSDoc／制御構造コメント関連ルールの「思想」**を説明するための
ドキュメントです。

- ルールの単一情報源（SoT）はあくまで `qualities/**` の設定ファイルと
  `vibecoding/var/contexts/qualities/docs/context.md` です。
- ここでは「なぜこの構成にしているか」を日本語で説明し、
  英語圏 OSS とは異なる前提（非英語ロケール前提）を明示します。

関連 SnD:

- `vibecoding/var/SPEC-and-DESIGN/202511/20251119/SnD-20251119-ja-comment-locale-rationale.md`

---

## なぜコメントに非ASCIIを必須にしているのか

### 英語ネイティブ前提のコードとのギャップ

多くの OSS や英語圏のコードベースでは、
「英語ネイティブ開発者にとって自然に読めること」を前提に
コードとコメントが書かれています。

その結果、英語に不慣れな非英語話者のエンジニアから見ると、

- コード本体も
- コメントや JSDoc も

がまとめて「わけのわからない英語の塊」に見えやすく、
**構文理解と英語読解の二重コスト**を常に払うことになります。

### コメントを「ロケール言語での仕様書」にする

このリポジトリでは、LLM と人間が共有する前提を

- `vibecoding/var/contexts/qualities/**/context.md`（品質コンテキスト）
- SnD（SPEC-and-DESIGN）
- コード内のコメント／JSDoc

の 3 層で揃える設計を採っています。

ここで **コメントのロケールをロケール言語に固定する** ことで、

- 英語ネイティブだけが楽をする「英語メモ」ではなく
- 英語の長文読解に自信がない非英語話者でも、
  仕様や意図を一次情報として追える

という状態を意図的に作っています。

つまり、**コメントは「ロケール言語での仕様書」であり、英語コードのハンディキャップを埋めるためのブースター**として扱われます。

---

## 関連ルールの役割分担

### `03-documentation/docs/config.mjs`（ESLint ドキュメント系ルール）

主な役割:

- ファイル先頭ヘッダ JSDoc に最低 8 個以上の箇条書きを要求する
  - 目的 / 非目標 / 入出力 / エラー方針 / 依存 / テスト戦略 など
- 主要な関数・クラス・型 alias に JSDoc を必須化する
- `if` / `for` / `while` / `switch` / `try` など
  制御構造の直前に「なぜその分岐・ループか」を説明するコメントを必須化する
- ESLint ディレクティブ（`eslint-disable` 等）に理由付きコメントを要求する

ポイントは、**コードの外に出しても困るような設計情報を、コメントとしてロケール言語で固定する**ことです。
これにより、コードを読むだけで「このファイル／関数が何をしないか（非目標）」まで追いやすくなります。

### `comment_locale` ポリシー

`qualities/policy/comment_locale/docs/run.mjs` は、
コメントの「文字種と言語」に関する最小ポリシーを担当します。

- 例えば、ja 系ロケールでは、JSDoc や制御構造コメントに
  **非 ASCII 文字（≒日本語）が含まれていること**を要求します。
- パスや URL だけの行、`@tag` 行、空行などは検査対象外です。
- ルール違反は lint エラーとして扱われ、
  一時的な `eslint-disable` ではなくコメントの書き換えで解決することを前提とします。

これにより、

- 「JSDoc は全部英語」「分岐コメントも全部英語」

といった状態を防ぎ、**最低 1 行はロケール言語で意図が書かれている**状態を
強制することができます。

---

## 英語コメントはどう扱われるか

- 英語だけのコメントは、原則として
  `comment_locale` ポリシーによりそのままでは許容されません。
- ただし、**ロケール言語のコメントの補足として英語を併記すること**は問題ありません。
  - 例:
    - `// ユーザーが未ログインならログイン画面へ強制遷移する (force redirect to /login when unauthenticated)`
- 許容されるかどうかの最終判断は、
  `03-documentation/docs/config.mjs` と
  `comment_locale` ポリシーのチェック内容に従います。

まとめると、

- **ロケール言語を含むコメントが必須**
- 英語コメントは「補足」としてであれば歓迎
- どこまで OK かは「品質ゲート（lint/policy）のチェックに通るかどうか」で決まる

という運用になります。

---

## このポリシーが目指しているもの

- 英語ネイティブの開発体験を犠牲にせず、
  非英語話者のエンジニアが **「仕様を読むときだけは有利になる」** 状態をつくること。
- コメントを単なるメモではなく、
  SnD / context.md と並ぶ **第一級の品質コンテキスト**として扱うこと。
- LLM がコード生成・修正を行う際に、
  ロケール言語コメントから直接「設計意図／非目標／エラー方針」を読み取れるようにし、
  英語読解力とは独立した品質保証の経路を確保すること。
